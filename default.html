<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" />
		<meta name="misapplication-tap-highlight" content="no" />
		<meta name="HandheldFriendly" content="true" />
		<meta name="MobileOptimized" content="320" />
		<title>收账</title>
		<link rel="stylesheet" href="js/bootstrap/css/bootstrap.min.css" />
		<link rel="stylesheet" href="js/bootstrap/css/bootstrap-theme.min.css" />
		<style>
			body {
				padding-top: 50px;
				padding-bottom: 40px;
			}
			.main {
				height: 100px;
			}
		</style>
	</head>

	<body>
		<div class="navbar navbar-fixed-top" role="navigation" id="menu-nav">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
						<span class="sr-only">切换导航</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">收账管理系统</a>
				</div>
			</div>
		</div>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
					<button type="button" class="btn btn-primary">记账</button>
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6">
					<div class="panel panel-primary">
						<div class="panel-heading">
							本年收支：&yen;30,000
						</div>
						<div class="panel-body">
							<div id="thisyear" data-type='thisyear' class="main"></div>
						</div>
					</div>
				</div>
				<div class="col-sm-6">
					<div class="panel panel-primary">
						<div class="panel-heading">
							总计收支：&yen;50,000
						</div>
						<div class="panel-body">
							<div id="lastyear" data-type='lastyear' class="main"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<footer class="footer">

		</footer>
		<script src="js/jQuery/jquery-1.11.2.min.js"></script>
		<script src="js/bootstrap/js/bootstrap.min.js"></script>
		<script src="js/echarts/build/dist/echarts.js"></script>
		<script>
			$(function() {
				require.config({
					paths: {
						echarts: 'js/echarts/build/dist'
					}
				});
				require(['echarts', 'echarts/chart/pie'], function(ec) {
					var chartRenders = $('.main');
					//var myChart = ec.init(document.getElementById('lastyear'));
					var option = {
						tooltip: {
							trigger: 'item',
							formatter: "{b} : {c} ({d}%)"
						},
						/*legend: {
							orient: 'vertical',
							x: 'left',
							data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']
						},*/
						/*toolbox: {
							show: true,
							feature: {
								mark: {
									show: true
								},
								dataView: {
									show: true,
									readOnly: false
								},
								magicType: {
									show: true,
									type: ['pie', 'funnel'],
									option: {
										funnel: {
											x: '25%',
											width: '50%',
											funnelAlign: 'center',
											max: 1548
										}
									}
								},
								restore: {
									show: true
								},
								saveAsImage: {
									show: true
								}
							}
						},*/
						//calculable: true,
						series: [{
							name: '收支',
							type: 'pie',
							//radius: ['50%', '70%'],
							radius: '55%',
							center: ['50%', '60%'],
							itemStyle: {
								normal: {
									label: {
										show: false
									},
									labelLine: {
										show: false
									}
								},
								/*emphasis: {
									label: {
										show: true,
										position: 'center',
										textStyle: {
											fontSize: '30',
											fontWeight: 'bold'
										}
									}
								}*/
							}/*,
							data: [{
								value: 335,
								name: '直接访问'
							}]*/
						}]
					};
					chartRenders.each(function(i) {
						var _t = $(this), chart = ec.init(_t[0]);//,$o=$.extend(true, option, {series:data:getBalanceData(_t.attr('data-type'))}});
						option.series[0].data=getBalanceData(_t.attr('data-type'));
						console.log(option);
						chart.setOption(option);
						/*var d = ;
						if (d) {
							for (var i = 0, length = d.length; i < length; i++) {
								chart.addData([
									[
										0, // 系列索引
										d[i],
										false, // 新增数据是否从队列头部插入
										true
									]
								]);
							}
						}*/
						/*chart.addData([[
							0, // 系列索引
							[{
								value: 458,
								name: 'Chrome'
							}],
							false, // 新增数据是否从队列头部插入
							true//, // 是否增加队列长度，false则自定删除原有数据，队头插入删队尾，队尾插入删队头
							//"测试动态添加数据"
						]]);*/
					});
				});
			});
			/**
			 * @description 获取收支数据
			 * @param {Object} type 获取的数据类型
			 */
			function getBalanceData(type) {
				if (type == 'thisyear') {
					return [{
						value: 10000,
						name: '收入'
					}, {
						value: 20000,
						name: '支出'
					}];
				}
				if (type == 'lastyear') {
					return [{
						value: 10000,
						name: '收入'
					}, {
						value: 40000,
						name: '支出'
					}];
				}
			}
		</script>
	</body>

</html>